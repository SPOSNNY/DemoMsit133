
@{
    ViewData["Title"] = "Register";
}

<h1>Register</h1>

<input type="text" placeholder="user name" id="inputName" />
<input type="text" placeholder="user password" id="inputPassword" />
<input type="button" value="註冊" id="button1" />

<div id="div1"></div>



@section script{
    <script>
        const btn = document.querySelector('#button1');
        const divMessage = document.querySelector('#div1');
        const txtName = document.querySelector('#inputName');
        const txtPassword = document.querySelector('#inputPassword');

        const xhr = new XMLHttpRequest();

        $('#inputName').mouseout(() => {

            xhr.addEventListener("load", () => {
                //接收結果
                const data = xhr.responseText;
                //顯示在div中
                divMessage.innerHTML = data;
                console.log("load")
            })

            xhr.open("GET", `/api/RegistrationCheck?userName=${txtName.value}&password=${txtPassword.value}`); //打開瀏覽器輸入網址
        
            xhr.send(); //Enter鍵

        });

        //    btn.addEventListener('click', () => {

        //        xhr.addEventListener("load", () => {
        //            //接收結果
        //            const data = xhr.responseText;
        //            //顯示在div中
        //            divMessage.innerHTML = data;
        //            console.log("load")
        //        })
        //        //ajax 開始
        //        xhr.addEventListener('loadstart', () => {
        //            console.log("loadstart")
        //            btn.value = "loading...";
        //            btn.setAttribute('disabled', 'disabled');
        //        })
        //        //ajax 結束
        //        xhr.addEventListener('loadend', () => {
        //            console.log("loadend")
        //            btn.value = "Load";
        //            btn.removeAttribute('disabled');
        //        })
               

        //        //步驟二對伺服器發出要求(Request)
        //        xhr.open("GET", `/api/RegistrationCheck?userName=${txtName.value}&password=${txtPassword.value}`); //打開瀏覽器輸入網址
        //        xhr.timeout = 5000; //超過時間伺服器沒有回應，停止程式的執行
        //        xhr.send(); //Enter鍵

        //})


       

    </script>
}